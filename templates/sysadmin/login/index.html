{% extends "sysadmin/layout/master.html" %}
{% block content %}
<section class="content-header">
    <h1>{% t Dashboard %}</h1>
</section>
<section class="content">
  <div class="row">
    <div class="col-md-3 col-sm-6 col-xs-12">
      <a href="/admin/customers" style="color: black;">
        <div class="info-box">
          <span class="info-box-icon bg-aqua"><i class="fa fa-users"></i></span>

          <div class="info-box-content">
              <span class="info-box-text">{% t "Customers" %}</span>
              <span class="info-box-number">{{number_customers}}</span>
          </div>
          <!-- /.info-box-content -->
        </div>
      </a>
      <!-- /.info-box -->
    </div>
    <div class="col-md-3 col-sm-6 col-xs-12">
      <a href="/admin/servers" style="color: black;">
        <div class="info-box">
          <span class="info-box-icon bg-green"><i class="fa fa-server"></i></span>

          <div class="info-box-content">
              <span class="info-box-text">{% t "Servers" %}</span>
              <span class="info-box-number">{{number_servers}}</span>
          </div>
          <!-- /.info-box-content -->
        </div>
        <!-- /.info-box -->
      </a>
    </div>
  </div>
  <!-- total bandwidth -->
  <div class="row">
    <div class="col-md-12">
      <div class="box box-primary">
        <div class="box-header with-border">
          <i class="fa fa-bar-chart-o"></i>
          <h3 class="box-title">{% t "Total Bandwidth" %}</h3>
        </div>
        <div class="box-body">
          <div id="total-bandwidth-chart" style="height: 200px;"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- statistic tables -->
  <div class="row">
      <div class="col-md-6">
          <div class="box box-primary">
              <div class="box-header with-border">
                  <h3 class="box-title">{% t "Top 10 Flow Customers" %}</h3>
              </div>
              <div class="box-body">
                  <table class="table table-bordered">
                      <thead>
                          <tr>
                              <th>{% t "Customer" %}</th>
                              <th>{% t "Inbound Flow" %}</th>
                              <th>{% t "Outbound Flow" %}</th>
                          </tr>
                      </thead>
                      <tbody>
                          {% if top_10_flow_user|length == 0 %}
                              <tr>
                                  <td colspan="3">{% t "No Data" %}</td>
                              </tr>
                          {% else %}
                              {% for item in top_10_flow_user %}
                                <tr>
                                    <td>{{item.0.name}}</td>
                                    <td>{{item.1|format_flow}}</td>
                                    <td>{{item.2|format_flow}}</td>
                                </tr>
                              {% endfor %}
                          {% endif %}
                      </tbody>
                  </table>
              </div>
          </div>
      </div>
      <div class="col-md-6">
          <div class="box box-primary">
              <div class="box-header with-border">
                  <h3 class="box-title">{% t "Top 10 Bandwidth Customers" %}</h3>
              </div>
              <div class="box-body">
                  <table class="table table-bordered">
                      <thead>
                          <tr>
                              <th>{% t "Customer" %}</th>
                              <th>{% t "Inbound Bandwidth" %}</th>
                              <th>{% t "Outbound Bandwidth" %}</th>
                          </tr>
                      </thead>
                      <tbody>
                          {% if top_10_flow_user|length == 0 %}
                              <tr>
                                  <td colspan="3">{% t "No Data" %}</td>
                              </tr>
                          {% else %}
                              {% for item in top_10_bandwidth_user %}
                                <tr>
                                    <td>{{item.0.name}}</td>
                                    <td>{{item.1|format_bandwidth}}</td>
                                    <td>{{item.2|format_bandwidth}}</td>
                                </tr>
                              {% endfor %}
                          {% endif %}
                      </tbody>
                  </table>
              </div>
          </div>
      </div>
  </div>
</section>
{% endblock %}
{% block script %}
$(function() {
    render_total_bandwidth_chart("#total-bandwidth-chart");
})
{% endblock %}
